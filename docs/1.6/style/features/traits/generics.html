<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <title>Using traits for bounds on generics</title>

    <link rel="stylesheet" type="text/css" href="../../rustbook.css">

    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    
                <div id="nav">
                    <button id="toggle-nav">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="bar"></span>
                        <span class="bar"></span>
                        <span class="bar"></span>
                    </button>
                </div>
<div id='toc' class='mobile-hidden'>
<ul class='chapter'>
<li><a  href='../../README.html'><b>1.</b> Introduction</a>
</li>
<li><a  href='../../style/README.html'><b>2.</b> Style</a>
<ul class='section'>
<li><a  href='../../style/whitespace.html'><b>2.1.</b> Whitespace</a>
</li>
<li><a  href='../../style/comments.html'><b>2.2.</b> Comments</a>
</li>
<li><a  href='../../style/braces.html'><b>2.3.</b> Braces, semicolons, commas</a>
</li>
<li><a  href='../../style/naming/README.html'><b>2.4.</b> Naming</a>
<ul class='section'>
<li><a  href='../../style/naming/ownership.html'><b>2.4.1.</b> Ownership variants</a>
</li>
<li><a  href='../../style/naming/containers.html'><b>2.4.2.</b> Containers/wrappers</a>
</li>
<li><a  href='../../style/naming/conversions.html'><b>2.4.3.</b> Conversions</a>
</li>
<li><a  href='../../style/naming/iterators.html'><b>2.4.4.</b> Iterators</a>
</li>
</ul>
</li>
<li><a  href='../../style/imports.html'><b>2.5.</b> Imports</a>
</li>
<li><a  href='../../style/organization.html'><b>2.6.</b> Organization</a>
</li>
</ul>
</li>
<li><a  href='../../features/README.html'><b>3.</b> Guidelines by Rust feature</a>
<ul class='section'>
<li><a  href='../../features/let.html'><b>3.1.</b> Let binding</a>
</li>
<li><a  href='../../features/match.html'><b>3.2.</b> Pattern matching</a>
</li>
<li><a  href='../../features/loops.html'><b>3.3.</b> Loops</a>
</li>
<li><a  href='../../features/functions-and-methods/README.html'><b>3.4.</b> Functions and methods</a>
<ul class='section'>
<li><a  href='../../features/functions-and-methods/input.html'><b>3.4.1.</b> Input</a>
</li>
<li><a  href='../../features/functions-and-methods/output.html'><b>3.4.2.</b> Output</a>
</li>
<li><a  href='../../features/functions-and-methods/convenience.html'><b>3.4.3.</b> For convenience</a>
</li>
</ul>
</li>
<li><a  href='../../features/types/README.html'><b>3.5.</b> Types</a>
<ul class='section'>
<li><a  href='../../features/types/conversions.html'><b>3.5.1.</b> Conversions</a>
</li>
<li><a  href='../../features/types/newtype.html'><b>3.5.2.</b> The newtype pattern</a>
</li>
</ul>
</li>
<li><a  href='../../features/traits/README.html'><b>3.6.</b> Traits</a>
<ul class='section'>
<li><a class='active' href='../../features/traits/generics.html'><b>3.6.1.</b> For generics</a>
</li>
<li><a  href='../../features/traits/objects.html'><b>3.6.2.</b> For objects</a>
</li>
<li><a  href='../../features/traits/overloading.html'><b>3.6.3.</b> For overloading</a>
</li>
<li><a  href='../../features/traits/extensions.html'><b>3.6.4.</b> For extensions</a>
</li>
<li><a  href='../../features/traits/reuse.html'><b>3.6.5.</b> For reuse</a>
</li>
<li><a  href='../../features/traits/common.html'><b>3.6.6.</b> Common traits</a>
</li>
</ul>
</li>
<li><a  href='../../features/modules.html'><b>3.7.</b> Modules</a>
</li>
<li><a  href='../../features/crates.html'><b>3.8.</b> Crates</a>
</li>
</ul>
</li>
<li><a  href='../../ownership/README.html'><b>4.</b> Ownership and resources</a>
<ul class='section'>
<li><a  href='../../ownership/constructors.html'><b>4.1.</b> Constructors</a>
</li>
<li><a  href='../../ownership/builders.html'><b>4.2.</b> Builders</a>
</li>
<li><a  href='../../ownership/destructors.html'><b>4.3.</b> Destructors</a>
</li>
<li><a  href='../../ownership/raii.html'><b>4.4.</b> RAII</a>
</li>
<li><a  href='../../ownership/cell-smart.html'><b>4.5.</b> Cells and smart pointers</a>
</li>
</ul>
</li>
<li><a  href='../../errors/README.html'><b>5.</b> Errors</a>
<ul class='section'>
<li><a  href='../../errors/signaling.html'><b>5.1.</b> Signaling</a>
</li>
<li><a  href='../../errors/handling.html'><b>5.2.</b> Handling</a>
</li>
<li><a  href='../../errors/propagation.html'><b>5.3.</b> Propagation</a>
</li>
<li><a  href='../../errors/ergonomics.html'><b>5.4.</b> Ergonomics</a>
</li>
</ul>
</li>
<li><a  href='../../safety/README.html'><b>6.</b> Safety and guarantees</a>
<ul class='section'>
<li><a  href='../../safety/unsafe.html'><b>6.1.</b> Using unsafe</a>
</li>
<li><a  href='../../safety/lib-guarantees.html'><b>6.2.</b> Library guarantees</a>
</li>
</ul>
</li>
<li><a  href='../../testing/README.html'><b>7.</b> Testing</a>
<ul class='section'>
<li><a  href='../../testing/unit.html'><b>7.1.</b> Unit testing</a>
</li>
</ul>
</li>
<li><a  href='../../platform.html'><b>8.</b> FFI, platform-specific code</a>
</li>
</ul>
</div>
<div id='page-wrapper'>
<div id='page'>


    <h1 class="title">Using traits for bounds on generics</h1>
    <p>The most widespread use of traits is for writing generic functions or types. For
example, the following signature describes a function for consuming any iterator
yielding items of type <code>A</code> to produce a collection of <code>A</code>:</p>

<span class='rusttest'>fn main() {
    fn from_iter&lt;T: Iterator&lt;A&gt;&gt;(iterator: T) -&gt; SomeCollection&lt;A&gt;
}</span><pre class='rust rust-example-rendered'>
<span class='kw'>fn</span> <span class='ident'>from_iter</span><span class='op'>&lt;</span><span class='ident'>T</span>: <span class='ident'>Iterator</span><span class='op'>&lt;</span><span class='ident'>A</span><span class='op'>&gt;&gt;</span>(<span class='ident'>iterator</span>: <span class='ident'>T</span>) <span class='op'>-&gt;</span> <span class='ident'>SomeCollection</span><span class='op'>&lt;</span><span class='ident'>A</span><span class='op'>&gt;</span></pre>

<p>Here, the <code>Iterator</code> trait specifies an interface that a type <code>T</code> must
explicitly implement to be used by this generic function.</p>

<p><strong>Pros</strong>:</p>

<ul>
<li><em>Reusability</em>. Generic functions can be applied to an open-ended collection of
types, while giving a clear contract for the functionality those types must
provide.</li>
<li><em>Static dispatch and optimization</em>. Each use of a generic function is
specialized (&quot;monomorphized&quot;) to the particular types implementing the trait
bounds, which means that (1) invocations of trait methods are static, direct
calls to the implementation and (2) the compiler can inline and otherwise
optimize these calls.</li>
<li><em>Inline layout</em>. If a <code>struct</code> and <code>enum</code> type is generic over some type
parameter <code>T</code>, values of type <code>T</code> will be laid out <em>inline</em> in the
<code>struct</code>/<code>enum</code>, without any indirection.</li>
<li><em>Inference</em>. Since the type parameters to generic functions can usually be
inferred, generic functions can help cut down on verbosity in code where
explicit conversions or other method calls would usually be necessary. See the
<a href="#use-case-limited-overloading-andor-implicit-conversions">overloading/implicits use case</a>
below.</li>
<li><p><em>Precise types</em>. Because generics give a <em>name</em> to the specific type
implementing a trait, it is possible to be precise about places where that
exact type is required or produced. For example, a function</p>

<span class='rusttest'>fn main() {
    fn binary&lt;T: Trait&gt;(x: T, y: T) -&gt; T
}</span><pre class='rust rust-example-rendered'>
<span class='kw'>fn</span> <span class='ident'>binary</span><span class='op'>&lt;</span><span class='ident'>T</span>: <span class='ident'>Trait</span><span class='op'>&gt;</span>(<span class='ident'>x</span>: <span class='ident'>T</span>, <span class='ident'>y</span>: <span class='ident'>T</span>) <span class='op'>-&gt;</span> <span class='ident'>T</span></pre>

<p>is guaranteed to consume and produce elements of exactly the same type <code>T</code>; it
cannot be invoked with parameters of different types that both implement
<code>Trait</code>.</p></li>
</ul>

<p><strong>Cons</strong>:</p>

<ul>
<li><em>Code size</em>. Specializing generic functions means that the function body is
duplicated. The increase in code size must be weighed against the performance
benefits of static dispatch.</li>
<li><em>Homogeneous types</em>. This is the other side of the &quot;precise types&quot; coin: if
<code>T</code> is a type parameter, it stands for a <em>single</em> actual type. So for example
a <code>Vec&lt;T&gt;</code> contains elements of a single concrete type (and, indeed, the
vector representation is specialized to lay these out in line). Sometimes
heterogeneous collections are useful; see
<a href="#use-case-trait-objects">trait objects</a> below.</li>
<li><em>Signature verbosity</em>. Heavy use of generics can bloat function signatures.
<strong>[Ed. note]</strong> This problem may be mitigated by some language improvements; stay tuned.</li>
</ul>

<h3 id='favor-widespread-traits-fixme-needs-rfc' class='section-header'><a href='#favor-widespread-traits-fixme-needs-rfc'>Favor widespread traits. <strong>[FIXME: needs RFC]</strong></a></h3>
<p>Generic types are a form of abstraction, which entails a mental indirection: if
a function takes an argument of type <code>T</code> bounded by <code>Trait</code>, clients must first
think about the concrete types that implement <code>Trait</code> to understand how and when
the function is callable.</p>

<p>To keep the cost of abstraction low, favor widely-known traits. Whenever
possible, implement and use traits provided as part of the standard library.  Do
not introduce new traits for generics lightly; wait until there are a wide range
of types that can implement the type.</p>

    <script type="text/javascript">
        window.playgroundUrl = "https://play.rust-lang.org";
    </script>
    <script src='rustbook.js'></script>
<script src='playpen.js'></script>
</div></div>


</body>
</html>